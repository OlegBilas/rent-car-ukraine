{"version":3,"file":"static/js/270.be3e5106.chunk.js","mappings":"uOAoEA,UAzDoB,SAAC,GAAiB,IAAfA,EAAc,EAAdA,QACrB,GAA0BC,EAAAA,EAAAA,UAAS,CAAC,GAApC,eAAOC,EAAP,KAAcC,EAAd,KACA,GAAwBF,EAAAA,EAAAA,UAAS,GAAjC,eAAOG,EAAP,KAAaC,EAAb,KACA,GAAwBJ,EAAAA,EAAAA,UAAS,IAAjC,eAAOK,EAAP,KAAaC,EAAb,KAMMC,GAAMC,EAAAA,EAAAA,UAgCZ,OA9BAC,EAAAA,EAAAA,YAAU,WACRL,EAAQ,GACRE,EAAQ,IACRC,EAAIG,SAAU,CACf,GAAE,CAACT,KAEJQ,EAAAA,EAAAA,YAAU,WACR,IAAME,GAAeC,EAAAA,EAAAA,GAAQb,EAASE,EAAOE,GAEzCJ,EAAQc,OAAS,GAA6B,IAAxBF,EAAaE,QAAyB,IAATV,IAErDW,EAAAA,GAAAA,MAAY,4CACZP,EAAIG,SAAU,GAGZX,EAAQc,OAAS,GAA6B,IAAxBF,EAAaE,QAAgBV,EAAO,IAE5DW,EAAAA,GAAAA,KAAW,mCACXP,EAAIG,SAAU,GAKdJ,EAFEH,EAAO,EAED,SAAAY,GAAS,wBAAQA,IAAR,OAAsBJ,GAAtB,EAGTA,EAEX,GAAE,CAACR,EAAMJ,EAASE,KAGjB,gCACE,SAAC,KAAD,WACE,2BAAO,mBAET,SAAC,IAAD,CAAYC,SAAUA,KACtB,SAAC,IAAD,CAAUG,KAAMA,KACdE,EAAIG,UACJ,SAAC,IAAD,CAAaM,KAAK,UAAUC,QA5CN,WAC1Bb,GAAQ,SAAAW,GAAS,OAAIA,EAAY,CAAhB,GAClB,EA0CK,SAA0D,gBAMjE,C","sources":["pages/CatalogPage/CatalogPage.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useState } from 'react';\nimport { toast } from 'react-toastify';\n\nimport { CarsList } from 'components/CarsList/CarsList';\nimport { FormSearch } from 'components/Form/Form';\n\nimport { getCars } from 'utils';\nimport { LoadMoreBtn } from './CatalogPage.styled';\nimport { Helmet } from 'react-helmet-async';\n\nconst CatalogPage = ({ allCars }) => {\n  const [query, setQuery] = useState({});\n  const [page, setPage] = useState(1);\n  const [cars, setCars] = useState([]);\n\n  const handleClickLoadMore = () => {\n    setPage(prevState => prevState + 1);\n  };\n\n  const ref = useRef();\n\n  useEffect(() => {\n    setPage(1);\n    setCars([]);\n    ref.current = false;\n  }, [query]);\n\n  useEffect(() => {\n    const carsFiltered = getCars(allCars, query, page);\n\n    if (allCars.length > 0 && carsFiltered.length === 0 && page === 1) {\n      // відсутні дані\n      toast.error(\"We didn't find any info on your request!\");\n      ref.current = true;\n    }\n\n    if (allCars.length > 0 && carsFiltered.length === 0 && page > 1) {\n      // кінець колекції\n      toast.warn(\"It's the end of the collection!\");\n      ref.current = true;\n    }\n\n    if (page > 1) {\n      // запит по тих самих ключових полях\n      setCars(prevState => [...prevState, ...carsFiltered]);\n    } else {\n      // новий запит\n      setCars(carsFiltered);\n    }\n  }, [page, allCars, query]);\n\n  return (\n    <section>\n      <Helmet>\n        <title>Our adverts</title>\n      </Helmet>\n      <FormSearch setQuery={setQuery} />\n      <CarsList cars={cars} />\n      {!ref.current && (\n        <LoadMoreBtn type=\"buttton\" onClick={handleClickLoadMore}>\n          Load more\n        </LoadMoreBtn>\n      )}\n    </section>\n  );\n};\n\nexport default CatalogPage;\n"],"names":["allCars","useState","query","setQuery","page","setPage","cars","setCars","ref","useRef","useEffect","current","carsFiltered","getCars","length","toast","prevState","type","onClick"],"sourceRoot":""}