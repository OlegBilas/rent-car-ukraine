{"version":3,"file":"static/js/270.236c9951.chunk.js","mappings":"iPAuEA,UA1DoB,WAClB,OAA0BA,EAAAA,EAAAA,UAAS,CAAC,GAApC,eAAOC,EAAP,KAAcC,EAAd,KACA,GAAwBF,EAAAA,EAAAA,UAAS,GAAjC,eAAOG,EAAP,KAAaC,EAAb,KACA,GAAwBJ,EAAAA,EAAAA,UAAS,IAAjC,eAAOK,EAAP,KAAaC,EAAb,KAEMC,GAAUC,EAAAA,EAAAA,IAAYC,EAAAA,IAEtBC,GAAMC,EAAAA,EAAAA,WAEZC,EAAAA,EAAAA,YAAU,WACRR,EAAQ,GACRE,EAAQ,IACRI,EAAIG,SAAU,CACf,GAAE,CAACZ,KAEJW,EAAAA,EAAAA,YAAU,WACR,IAAME,GAAaC,EAAAA,EAAAA,GAAQR,EAASN,EAAOE,GAE3CG,EAAQQ,EAAWE,aACpB,GAAE,CAACT,EAASJ,EAAMF,IAuBnB,OACE,gCACE,SAAC,KAAD,WACE,2BAAO,mBAET,SAAC,IAAD,CAAYC,SAAUA,KACtB,SAAC,IAAD,CAAUG,KAAMA,KACdK,EAAIG,UACJ,SAAC,IAAD,CAAaI,KAAK,UAAUC,QA7BN,WAC1B,IAAMJ,GAAaC,EAAAA,EAAAA,GAAQR,EAASN,EAAOE,GAE3C,GADAC,GAAQ,SAAAe,GAAS,OAAIA,EAAY,CAAhB,IACbZ,EAAQa,OAAS,GAAkC,IAA7BN,EAAWO,eAAgC,IAATlB,EAI1D,OAFAmB,EAAAA,GAAAA,MAAY,iDACZZ,EAAIG,SAAU,GAKdN,EAAQa,OAAS,GACjBN,EAAWO,gBAAkBP,EAAWE,aAAaI,SAGrDE,EAAAA,GAAAA,KAAW,mCACXZ,EAAIG,SAAU,GAEhBP,EAAQQ,EAAWE,aACpB,EAUK,SAA0D,gBAMjE,C","sources":["pages/CatalogPage/CatalogPage.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useState } from 'react';\nimport { toast } from 'react-toastify';\n\nimport { CarsList } from 'components/CarsList/CarsList';\nimport { FormSearch } from 'components/Form/Form';\n\nimport { getCars } from 'utils';\nimport { LoadMoreBtn } from './CatalogPage.styled';\nimport { Helmet } from 'react-helmet-async';\nimport { useSelector } from 'react-redux';\nimport { selectCars } from 'redux/cars/selectors';\n\nconst CatalogPage = () => {\n  const [query, setQuery] = useState({});\n  const [page, setPage] = useState(1);\n  const [cars, setCars] = useState([]);\n\n  const allCars = useSelector(selectCars);\n\n  const ref = useRef();\n\n  useEffect(() => {\n    setPage(1);\n    setCars([]);\n    ref.current = false;\n  }, [query]);\n\n  useEffect(() => {\n    const carsObject = getCars(allCars, query, page);\n\n    setCars(carsObject.carsFiltered);\n  }, [allCars, page, query]);\n\n  const handleClickLoadMore = () => {\n    const carsObject = getCars(allCars, query, page);\n    setPage(prevState => prevState + 1);\n    if (allCars.length > 0 && carsObject.overallLength === 0 && page === 1) {\n      // відсутні дані\n      toast.error(\"We didn't find any info on your request!\");\n      ref.current = true;\n      return;\n    }\n\n    if (\n      allCars.length > 0 &&\n      carsObject.overallLength === carsObject.carsFiltered.length\n    ) {\n      // кінець колекції\n      toast.warn(\"It's the end of the collection!\");\n      ref.current = true;\n    }\n    setCars(carsObject.carsFiltered);\n  };\n\n  return (\n    <section>\n      <Helmet>\n        <title>Our adverts</title>\n      </Helmet>\n      <FormSearch setQuery={setQuery} />\n      <CarsList cars={cars} />\n      {!ref.current && (\n        <LoadMoreBtn type=\"buttton\" onClick={handleClickLoadMore}>\n          Load more\n        </LoadMoreBtn>\n      )}\n    </section>\n  );\n};\n\nexport default CatalogPage;\n"],"names":["useState","query","setQuery","page","setPage","cars","setCars","allCars","useSelector","selectCars","ref","useRef","useEffect","current","carsObject","getCars","carsFiltered","type","onClick","prevState","length","overallLength","toast"],"sourceRoot":""}